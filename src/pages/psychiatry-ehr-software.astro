---
/**
 * Category landing page targeting "psychiatry EHR software" (260/mo search volume)
 */
import BaseLayout from '../layouts/BaseLayout.astro';
import SoftwareCard from '../components/SoftwareCard.astro';
import { getCollection } from 'astro:content';

const allSoftware = await getCollection('software');

// Sort by psychiatry-relevant features
const sortedSoftware = allSoftware
  .map((s) => ({
    ...s.data,
    ketamineFeatureCount: Object.values(s.data.ketamine_features).filter(Boolean).length,
    hasEPrescribe: s.data.general_features?.some(
      (f) => f.feature.toLowerCase().includes('prescri') && f.available
    ),
    hasMedManagement:
      s.data.description.toLowerCase().includes('medication') ||
      s.data.description.toLowerCase().includes('psychiatr') ||
      s.data.general_features?.some((f) => f.feature.toLowerCase().includes('medication')),
  }))
  .sort((a, b) => {
    // Prioritize e-prescribe capability (essential for psychiatry)
    if (a.hasEPrescribe && !b.hasEPrescribe) return -1;
    if (!a.hasEPrescribe && b.hasEPrescribe) return 1;
    // Then medication management
    if (a.hasMedManagement && !b.hasMedManagement) return -1;
    if (!a.hasMedManagement && b.hasMedManagement) return 1;
    return b.ketamineFeatureCount - a.ketamineFeatureCount;
  });

const jsonLd = {
  '@context': 'https://schema.org',
  '@type': 'CollectionPage',
  name: 'Psychiatry EHR Software 2026',
  description: `Compare ${allSoftware.length} EHR systems for psychiatrists. E-prescribing, medication management, and psychiatric documentation tools.`,
  url: 'https://ketaminesoftware.com/psychiatry-ehr-software/',
};
---

<BaseLayout
  title="Psychiatry EHR Software 2026 - Best Systems for Psychiatrists"
  description={`Compare ${allSoftware.length} EHR systems designed for psychiatrists. E-prescribing with EPCS, medication management, and psychiatric documentation. Reviews and pricing.`}
  jsonLd={jsonLd}
>
  <!-- Breadcrumb -->
  <nav class="border-b border-slate-200 bg-slate-50 px-4 py-3 sm:px-6 lg:px-8">
    <div class="mx-auto max-w-7xl">
      <ol class="flex items-center gap-2 text-sm">
        <li>
          <a href="/" class="text-slate-500 hover:text-slate-700">Home</a>
        </li>
        <li class="text-slate-400">/</li>
        <li class="text-slate-900">Psychiatry EHR Software</li>
      </ol>
    </div>
  </nav>

  <!-- Header -->
  <section class="bg-gradient-to-b from-slate-900 to-slate-800 px-4 py-16 sm:px-6 lg:px-8">
    <div class="mx-auto max-w-4xl text-center">
      <h1 class="text-3xl font-bold tracking-tight text-white sm:text-4xl lg:text-5xl">
        Psychiatry EHR Software
      </h1>
      <p class="mt-6 text-xl text-slate-300">
        EHR systems built for psychiatrists with e-prescribing, medication tracking, and psychiatric-specific documentation.
      </p>
    </div>
  </section>

  <!-- Requirements Section -->
  <section class="px-4 py-12 sm:px-6 lg:px-8">
    <div class="mx-auto max-w-3xl">
      <div class="prose prose-slate max-w-none">
        <h2>What Psychiatrists Need in an EHR</h2>
        <p>
          Psychiatrists have unique EHR requirements that go beyond standard mental health software:
        </p>
        <ul>
          <li><strong>E-Prescribing with EPCS</strong> - Essential for prescribing controlled substances like stimulants, benzodiazepines, and ketamine</li>
          <li><strong>Medication management</strong> - Track current medications, interactions, and dosage adjustments</li>
          <li><strong>Psychiatric evaluation templates</strong> - Initial evaluations, med checks, and progress notes</li>
          <li><strong>Lab integration</strong> - Order and track lab work (lithium levels, metabolic panels, etc.)</li>
          <li><strong>Prior authorization tools</strong> - Streamline the PA process for specialty medications</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Top Picks for Psychiatry -->
  <section class="bg-teal-50 px-4 py-12 sm:px-6 lg:px-8">
    <div class="mx-auto max-w-5xl">
      <h2 class="text-2xl font-bold text-slate-900">Top Picks for Psychiatrists</h2>
      <div class="mt-6 grid gap-6 md:grid-cols-3">
        <div class="rounded-xl border border-teal-200 bg-white p-6">
          <span class="inline-block rounded-full bg-teal-100 px-3 py-1 text-sm font-medium text-teal-700">Best for Prescribers</span>
          <h3 class="mt-4 text-lg font-semibold text-slate-900">Valant</h3>
          <p class="mt-2 text-sm text-slate-600">Purpose-built for behavioral health with strong e-prescribing and outcome tracking.</p>
          <p class="mt-3 text-lg font-semibold text-teal-600">From $149/mo</p>
          <a href="/software/valant/" class="mt-4 inline-block text-sm text-teal-600 hover:text-teal-700">Read review →</a>
        </div>
        <div class="rounded-xl border border-slate-200 bg-white p-6">
          <span class="inline-block rounded-full bg-slate-100 px-3 py-1 text-sm font-medium text-slate-700">SPRAVATO Support</span>
          <h3 class="mt-4 text-lg font-semibold text-slate-900">AdvancedMD</h3>
          <p class="mt-2 text-sm text-slate-600">Comprehensive RCM with SPRAVATO REMS billing integration for ketamine practices.</p>
          <p class="mt-3 text-lg font-semibold text-teal-600">From $299/mo</p>
          <a href="/software/advancedmd/" class="mt-4 inline-block text-sm text-teal-600 hover:text-teal-700">Read review →</a>
        </div>
        <div class="rounded-xl border border-slate-200 bg-white p-6">
          <span class="inline-block rounded-full bg-slate-100 px-3 py-1 text-sm font-medium text-slate-700">Best Mobile</span>
          <h3 class="mt-4 text-lg font-semibold text-slate-900">DrChrono</h3>
          <p class="mt-2 text-sm text-slate-600">Mobile-first design with strong API and e-prescribing for on-the-go psychiatrists.</p>
          <p class="mt-3 text-lg font-semibold text-teal-600">Contact for pricing</p>
          <a href="/software/drchrono/" class="mt-4 inline-block text-sm text-teal-600 hover:text-teal-700">Read review →</a>
        </div>
      </div>
    </div>
  </section>

  <!-- E-Prescribing Table -->
  <section class="px-4 py-12 sm:px-6 lg:px-8">
    <div class="mx-auto max-w-5xl">
      <h2 class="text-2xl font-bold text-slate-900">E-Prescribing Comparison</h2>
      <p class="mt-2 text-slate-600">EPCS (Electronic Prescribing for Controlled Substances) capability is essential for psychiatrists</p>
      <div class="mt-6 overflow-x-auto">
        <table class="w-full border-collapse text-sm">
          <thead>
            <tr class="border-b border-slate-200 bg-slate-50">
              <th class="py-3 pr-4 text-left font-semibold text-slate-900">Software</th>
              <th class="px-4 py-3 text-center font-semibold text-slate-900">E-Prescribe</th>
              <th class="px-4 py-3 text-center font-semibold text-slate-900">EPCS (Controlled)</th>
              <th class="px-4 py-3 text-center font-semibold text-slate-900">Labs</th>
              <th class="pl-4 py-3 text-left font-semibold text-slate-900">Starting Price</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-slate-100 bg-white">
            {sortedSoftware.slice(0, 10).map((s) => (
              <tr class="hover:bg-slate-50">
                <td class="py-3 pr-4">
                  <a href={`/software/${s.slug}/`} class="font-medium text-slate-900 hover:text-teal-600">
                    {s.name}
                  </a>
                </td>
                <td class="px-4 py-3 text-center">
                  {s.hasEPrescribe ? (
                    <span class="text-teal-600">✓</span>
                  ) : (
                    <span class="text-slate-300">-</span>
                  )}
                </td>
                <td class="px-4 py-3 text-center">
                  {s.general_features?.some(f => f.feature.toLowerCase().includes('epcs') && f.available) ? (
                    <span class="text-teal-600">✓</span>
                  ) : s.hasEPrescribe ? (
                    <span class="text-amber-500">Add-on</span>
                  ) : (
                    <span class="text-slate-300">-</span>
                  )}
                </td>
                <td class="px-4 py-3 text-center">
                  {s.general_features?.some(f => f.feature.toLowerCase().includes('lab') && f.available) ? (
                    <span class="text-teal-600">✓</span>
                  ) : (
                    <span class="text-slate-300">-</span>
                  )}
                </td>
                <td class="py-3 pl-4 text-slate-600">
                  {s.pricing.starting_price ? `$${s.pricing.starting_price}/mo` : 'Contact'}
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- All Software Grid -->
  <section class="bg-slate-50 px-4 py-12 sm:px-6 lg:px-8">
    <div class="mx-auto max-w-7xl">
      <h2 class="text-2xl font-bold text-slate-900">All Psychiatry EHR Options</h2>
      <div class="mt-8 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {sortedSoftware.map((software) => (
          <SoftwareCard
            name={software.name}
            slug={software.slug}
            description={software.description}
            logo={software.logo}
            startingPrice={software.pricing.starting_price}
            currency={software.pricing.currency}
            pricingModel={software.pricing.model}
            hasFreeTrisl={software.pricing.has_free_trial}
            ketamineFeatureCount={software.ketamineFeatureCount}
            isKetamineSpecific={software.hasEPrescribe}
          />
        ))}
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="px-4 py-12 sm:px-6 lg:px-8">
    <div class="mx-auto max-w-3xl text-center">
      <h2 class="text-2xl font-bold text-slate-900">Compare EHR Systems</h2>
      <p class="mt-4 text-slate-600">
        See detailed side-by-side comparisons of any two psychiatry EHR systems.
      </p>
      <a
        href="/compare/"
        class="mt-6 inline-flex items-center justify-center rounded-lg bg-teal-600 px-6 py-3 text-base font-medium text-white hover:bg-teal-700"
      >
        Compare Software
      </a>
    </div>
  </section>
</BaseLayout>
